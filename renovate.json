{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
      ":enableRenovate",
      "config:base",
      ":disableRateLimiting",
      ":dependencyDashboard",
      ":separatePatchReleases",
      "docker:enableMajor",
      ":enablePreCommit",
      ":semanticCommits"
    ],
    "platform": "github",
    "username": "Barrybot[bot]",
    "repositories": [
      "j0sh3rs/helm-charts"
    ],
    "onboarding": false,
    "gitAuthor": "Barrybot <barry-bot[bot]@users.noreply.github.com>",
    "dependencyDashboardTitle": "Renovate Dashboard ðŸ¤–",
    "suppressNotifications": [
      "prIgnoreNotification"
    ],
    "rebaseWhen": "auto",
    "ignorePaths": [
      "cluster/base/"
    ],
    "docker-compose": {
      "fileMatch": [
        "(^|/)docker-compose.*.ya?ml$",
        "(^|/)docker-compose.*.ya?ml.j2$"
      ]
    },
    "helm-values": {
      "fileMatch": [
        "cluster/.+/helm-release\\.yaml$"
      ]
    },
    "helmv3": {
      "fileMatch": [
        "charts/.+/Chart\\.yaml$"
      ]
    },
    "kubernetes": {
      "fileMatch": [
        "cluster/.+\\.yaml$"
      ]
    },
    "flux": {
      "fileMatch": [
        "cluster/.+\\.yaml$"
      ]
    },
    "regexManagers": [
      {
        "description": "Process CRD dependencies",
        "fileMatch": [
          "cluster/base-custom/crds/.+/.+.yaml"
        ],
        "matchStrings": [
          "registryUrl=(?<registryUrl>\\S+) chart=(?<depName>\\S+)\n.*?(?<currentValue>[^-\\s]*)\n",
          "datasource=(?<datasource>\\S+) image=(?<depName>\\S+)\n.*?-\\s(.*?)/(?<currentValue>[^/]+)/[^/]+\n"
        ],
        "datasourceTemplate": "{{#if datasource}}{{{datasource}}}{{else}}helm{{/if}}"
      },
      {
        "description": "Process various dependencies",
        "fileMatch": [
          "cluster/.+\\.ya?ml$"
        ],
        "matchStrings": [
          "datasource=(?<datasource>\\S+) depName=(?<depName>\\S+)( versioning=(?<versioning>\\S+))?\n.*?\"(?<currentValue>.*)\"\n"
        ],
        "datasourceTemplate": "{{#if datasource}}{{{datasource}}}{{else}}github-releases{{/if}}",
        "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}"
      },
      {
        "description": "Process raw GitHub URLs",
        "fileMatch": [
          "cluster/.+\\.ya?ml$"
        ],
        "matchStrings": [
          "https:\\/\\/raw.githubusercontent.com\\/(?<depName>[\\w\\d\\-_]+\\/[\\w\\d\\-_]+)\\/(?<currentValue>[\\w\\d\\.\\-_]+)\\/.*"
        ],
        "datasourceTemplate": "github-releases",
        "versioningTemplate": "semver"
      }
    ],
    "packageRules": [
      {
        "matchDatasources": [
          "helm"
        ],
        "ignoreDeprecated": true
      },
      {
        "matchDatasources": [
          "docker"
        ],
        "commitMessageExtra": "to {{newVersion}}"
      },
      {
        "matchDatasources": [
          "docker"
        ],
        "versioning": "regex:^version-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)$",
        "matchPackageNames": [
          "ghcr.io/linuxserver/healthchecks"
        ]
      }
    ]
  }